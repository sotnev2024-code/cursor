# Руководство по миграции базы данных

## Проблема

После обновления модели `Specialist` в базе данных отсутствуют новые поля:
- `schedule_type` - тип графика работы
- `schedule_start_date` - дата начала рабочей недели
- `work_dates` - даты работы для свободного графика

## Решение

### Автоматическая миграция

При запуске `app.py` автоматически выполняется миграция базы данных через скрипт `scripts/migrate_specialists.py`.

### Ручная миграция

Если нужно выполнить миграцию вручную:

```bash
python scripts/migrate_specialists.py
```

Скрипт:
1. Проверяет существующие колонки в таблице `specialists`
2. Добавляет недостающие поля:
   - `schedule_type VARCHAR(20) DEFAULT '5x2'`
   - `schedule_start_date DATE`
   - `work_dates TEXT`
3. Обновляет существующие записи, устанавливая `schedule_type = '5x2'` по умолчанию

## Исправление кнопки сохранения

Кнопка "Сохранить специалиста" теперь вызывает правильный метод:
- Было: `window.specialistsModule.saveSpecialist()`
- Стало: `window.specialistsModule.save()`

## Проверка

После миграции:
1. Перезапустите Flask сервер: `python app.py`
2. Откройте приложение в браузере
3. Попробуйте добавить или отредактировать специалиста
4. Проверьте, что ошибки больше не появляются

## Если ошибка сохраняется

1. Убедитесь, что миграция выполнена успешно
2. Проверьте, что база данных существует: `database/beauty_salon.db`
3. Если нужно, удалите базу данных и пересоздайте её (данные будут потеряны):
   ```bash
   rm database/beauty_salon.db
   python app.py
   ```
